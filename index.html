<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Good Bye Mumbai</title>

<style>
body{
  margin:0;
  font-family:'Segoe UI', Arial;
  background:#000;
  color:white;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}
.gif-bg{
  position:fixed;
  inset:0;
  opacity:0.6;
  z-index:-1;
}
.gif-bg video{
  width:100%;
  height:100%;
  object-fit:cover;
}
.box{
  position:fixed;
  top:8px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.6);
  padding:16px 18px;
  border-radius:18px;
  width:92%;
  max-width:720px;
  text-align:center;
}
h1{font-size:28px;}
#timer{margin:12px 0;font-size:18px;font-weight:bold;}
button{
  padding:12px 26px;
  border:none;
  border-radius:30px;
  background:#ff9800;
  font-weight:bold;
  font-size:18px;
  cursor:pointer;
}
#volumeSlider{
  width:100%;
  margin-top:10px;
}
#secretMsg{
  display:none;
  margin-top:14px;
  font-size:18px;
  color:#ffb74d;
}

/* FLOWER POT */
.spark{
  position:fixed;
  bottom:0;
  width:4px;
  height:18px;
  background:linear-gradient(to top,#ff9800,#fff);
  animation:sparkUp 3s ease-out forwards;
}
.left-pot{left:6%;}
.right-pot{right:6%;}
@keyframes sparkUp{
  to{transform:translateY(-70vh);opacity:0;}
}
</style>
</head>

<body>

<div class="gif-bg">
  <video autoplay muted loop playsinline>
    <source src="ek-mulakat-jaruri-hai-sanam.mp4" type="video/mp4">
  </video>
</div>

<div class="box">
  <h1 id="typing"></h1>
  <div id="timer">Loading...</div>

  <button id="playPauseBtn">‚ñ∂Ô∏è Play</button>
  <input id="volumeSlider" type="range" min="0" max="100" value="60">

  <div id="secretMsg">üíå Mumbai sirf shehar nahi‚Ä¶ ek jazba tha</div>
</div>

<audio id="music" loop>
  <source src="ghar-more-pardesiya.mp3" type="audio/mpeg">
</audio>

<script>
/* FLOWER POT */
function createSpark(side){
  const s=document.createElement("div");
  s.className="spark "+side;
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),3000);
}
function startFlowerPot(){
  createSpark("left-pot");
  createSpark("right-pot");
}

/* MUSIC */
const music=document.getElementById("music");
const btn=document.getElementById("playPauseBtn");
const volumeSlider=document.getElementById("volumeSlider");

music.volume=0.6;
volumeSlider.value=60;

volumeSlider.addEventListener("input",()=>{
  music.volume=volumeSlider.value/100;
});

let potInterval=null;
let fadeInterval=null;

/* FADE */
function fadeInMusic(){
  clearInterval(fadeInterval);
  fadeInterval=setInterval(()=>{
    if(music.volume<volumeSlider.value/100){
      music.volume+=0.02;
    }else clearInterval(fadeInterval);
  },250);
}
function fadeOutMusic(){
  clearInterval(fadeInterval);
  fadeInterval=setInterval(()=>{
    if(music.volume>0.02){
      music.volume-=0.02;
    }else{
      music.pause();
      clearInterval(fadeInterval);
    }
  },200);
}

/* EFFECTS */
function startEffects(){
  startFlowerPot();
  potInterval=setInterval(startFlowerPot,800);
}
function stopEffects(){
  clearInterval(potInterval);
}

/* AUDIO ANALYSER + VIBRATION */
let lastVibrate=0;
let beatCount=0;
let secretUnlocked=false;
let headphonesConnected=false;

if(navigator.mediaDevices?.enumerateDevices){
  navigator.mediaDevices.enumerateDevices().then(d=>{
    headphonesConnected=d.some(x=>x.kind==="audiooutput" && x.label.toLowerCase().includes("head"));
  });
}

const AudioContext=window.AudioContext||window.webkitAudioContext;
const audioCtx=new AudioContext();
const source=audioCtx.createMediaElementSource(music);
const analyser=audioCtx.createAnalyser();
source.connect(analyser);
analyser.connect(audioCtx.destination);
analyser.fftSize=64;
const dataArray=new Uint8Array(analyser.frequencyBinCount);

function audioSyncEffects(){
  analyser.getByteFrequencyData(dataArray);
  const avg=dataArray.reduce((a,b)=>a+b)/dataArray.length;
  const now=Date.now();

  if(avg>120){
    beatCount++;

    if(!headphonesConnected && navigator.vibrate && now-lastVibrate>300){
      navigator.vibrate(60);
      lastVibrate=now;
    }

    if(beatCount>=5 && !secretUnlocked){
      document.getElementById("secretMsg").style.display="block";
      secretUnlocked=true;
      navigator.vibrate?.([200,50,200]);
    }
  }
  requestAnimationFrame(audioSyncEffects);
}

/* BUTTON */
btn.addEventListener("click",()=>{
  if(music.paused){
    audioCtx.resume();
    music.play();
    fadeInMusic();
    startEffects();
    audioSyncEffects();
    btn.innerHTML="‚è∏ Pause";
  }else{
    fadeOutMusic();
    stopEffects();
    btn.innerHTML="‚ñ∂Ô∏è Play";
  }
});

/* TYPING */
const text="üíî‡§Ö‡§≤‡§µ‡§ø‡§¶‡§æ ‡§Æ‡•Å‡§Ç‡§¨‡§àüíî";
let i=0;
const typingEl=document.getElementById("typing");
(function typing(){
  if(i<text.length){
    typingEl.innerHTML+=text.charAt(i++);
    setTimeout(typing,120);
  }
})();

/* TIMER */
const targetDate=new Date("February 22, 2026 00:00:00").getTime();
const timerEl=document.getElementById("timer");
setInterval(()=>{
  const diff=targetDate-Date.now();
  if(diff<=0){
    timerEl.innerHTML="üåÜ ‡§Ö‡§¨ ‡§Æ‡•Å‡§Ç‡§¨‡§à ‡§ï‡•ã ‡§Ö‡§≤‡§µ‡§ø‡§¶‡§æ ‡§ï‡§π‡§®‡•á ‡§ï‡§æ ‡§∏‡§Æ‡§Ø‚Ä¶";
    return;
  }
  const d=Math.floor(diff/864e5);
  const h=Math.floor(diff/36e5)%24;
  const m=Math.floor(diff/6e4)%60;
  const s=Math.floor(diff/1000)%60;
  timerEl.innerHTML=`${d} ‡§¶‡§ø‡§® : ${h} ‡§ò‡§Ç‡§ü‡•á : ${m} ‡§Æ‡§ø‡§®‡§ü : ${s} ‡§∏‡•á‡§ï‡§Ç‡§°`;
},1000);
</script>

</body>
</html>
